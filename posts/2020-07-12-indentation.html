<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ko" lang="ko">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />

        <title>lionhairdino - 하스켈 소스 들여 쓰기</title>

        <meta name="description" content="들여 쓰기 개념은 상식적인 선에서 모두 들어맞을 것 같아 그냥 지나치는 경우가 있는데, 몇 가지 포인트는 짚어두고 가는게 좋습니다." />
        <meta property="og:description" content="들여 쓰기 개념은 상식적인 선에서 모두 들어맞을 것 같아 그냥 지나치는 경우가 있는데, 몇 가지 포인트는 짚어두고 가는게 좋습니다." />

        <link rel="stylesheet" type="text/css" href="../css/default.css" />
        <link rel="icon" href="https://lionhairdino.github.io/favicon.svg" />
        <link rel="icon" type="image/png" href="../images/favicon/Lionhairdino16px.png" sizes="16x16" />
        <link rel="icon" type="image/png" href="../images/favicon/Lionhairdino24px.png" sizes="24x24" />
        <link rel="icon" type="image/png" href="../images/favicon/Lionhairdino32px.png" sizes="32x32" />
        <link rel="icon" type="image/png" href="../images/favicon/Lionhairdino48px.png" sizes="48x48" />
        <link rel="icon" type="image/png" href="../images/favicon/Lionhairdino57px.png" sizes="57x57" />
        <link rel="icon" type="image/png" href="../images/favicon/Lionhairdino60px.png" sizes="60x60" />
        <link rel="icon" type="image/png" href="../images/favicon/Lionhairdino64px.png" sizes="64x64" />
        <link rel="icon" type="image/png" href="../images/favicon/Lionhairdino72px.png" sizes="72x72" />
        <link rel="icon" type="image/png" href="../images/favicon/Lionhairdino76px.png" sizes="76x76" />
        <link rel="icon" type="image/png" href="../images/favicon/Lionhairdino114px.png" sizes="114x114" />
        <link rel="apple-touch-icon-precomposed" href="../images/favicon/Lionhairdino120px.png" sizes="120x120" />
        <link rel="apple-touch-icon-precomposed" href="../images/favicon/Lionhairdino144px.png" sizes="144x144" />
        <link rel="shortcut icon" href="../favicon.ico" />
        <link rel="apple-touch-icon-precomposed" href="../images/favicon/Lionhairdino152px.png" sizes="152x152" />
        <link rel="apple-touch-icon-precomposed" href="../images/favicon/Lionhairdino180px.png" sizes="180x180" />
        <link rel="icon" type="image/png" href="../images/favicon/Lionhairdino192px.png" sizes="192x192" />
        <link rel="manifest" href="../site.webmanifest" />
        <link rel="mask-icon" href="https://lionhairdino.github.io/Lionhairdino_black.svg" color="#ff7500" />
        <meta name="msapplication-TileImage" content="/images/favicon/Lionhairdino144px.png" />
        <meta name="msapplication-TileColor" content="#ff7500" />
        <meta name="theme-color" content="#ffffff" />
        <meta property="og:type" content="website" />
        <meta property="og:title" content="하스켈 소스 들여 쓰기" />
        <meta property="og:site_name" content="Lionhairdino" />
        <meta property="og:url" content="https://lionhairdino.github.io/posts/2020-07-12-indentation.html" />

        <meta property="og:image" content="https://lionhairdino.github.io/images/state400px.png" />

      <meta name="keywords" content="들여 쓰기, indentation">
<script src="../script/copycode.js"></script>

    </head>
    <body>
        <div id="header">
            <div id="navigation">
                <a href="../">lionhairdino</a> 
                <a href="../about.html">about</a>
                <!--<a href="/archive.html">archive</a>-->
            </div>
        </div>

        <div id="content">
            <h1>하스켈 소스 들여 쓰기</h1>

            <link rel="stylesheet" type="text/css" href="../css/syntax.css" />
<div class="info">
    Posted on July 12, 2020
    
</div>

<p><a href="https://en.wikibooks.org/wiki/Haskell/Indentation" class="uri">https://en.wikibooks.org/wiki/Haskell/Indentation</a></p>
<p>들여 쓰기가 의미를 가지는 언어를 쓰는게 처음이라 은근히 헤매게 만든 요소였습니다.</p>
<p>아직 <em>(1)끝나지 않은 표현식을 줄바꿈을 해서 계속 할 때는 현재 표현식의 시작보다는 들여 쓰기</em> 해야합니다. 그 다음, <em>(2)같은 레벨에 있는 딸린 표현식들은 모두 같은 들여 쓰기값</em>을 가져야 합니다.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- error</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> x <span class="ot">=</span> a</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>  y <span class="ot">=</span> b</span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- error</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> x <span class="ot">=</span> a</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>     y <span class="ot">=</span> b</span></code></pre></div>
<div class="sourceCode" id="cb3"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- ok</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> x <span class="ot">=</span> a</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>    y <span class="ot">=</span> b</span></code></pre></div>
<p>얼핏 보면, 표현식expression의 일부라면 시작보다 몇 칸이든 들여 쓰기만 하면 연결된 표현식이라 판단 해 줄 것 같은데, 그렇지 않습니다. 딸린 표현식은 첫 번째로 나온 딸린 표현식의 들여 쓰기와 나머지 딸린 표현식들이 들여 쓰기가 같아야 합니다. 여기서 첫 번째 딸린 표현식의 들여 쓰기를 보는 방법을 알면 거의 헤매지 않습니다.</p>
<p><code>x = a</code> 이전에 공백 하나 있다고 들여 쓰기가 한 칸인게 아니라 <em>(3)let까지 포함해서 들여 쓰기로 판단</em>합니다. <code>let</code> + 공백 하나 해서 총 4칸 들여 쓰기를 한 상태입니다. 그래서 위의 마지막 코드만 ok입니다. 첫 번째 딸린 표현식으로 판단한다 했으니 다음의 경우도 가능합니다.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- ok</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a> x <span class="ot">=</span> a</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a> x <span class="ot">=</span> b</span></code></pre></div>
<p>첫 번째 딸린 표현식은 한 칸 들여 쓰기 했으므로, 두 번째도 한 칸 들여 쓰면 ok입니다.</p>
<p>그 다음, 한 라인에 쓰여 있는 딸린 표현식의 문제입니다. 위 규칙 적용하면 다음처럼 쓸 수 있습니다.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- ok</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>func arg1 arg2 <span class="ot">=</span> <span class="kw">do</span> foo</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>                    bar</span></code></pre></div>
<p><code>do</code>를 내리면 아래처럼 쓸 수 있습니다.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- ok</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>func arg1 arg2 <span class="ot">=</span> </span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">do</span> foo</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>       bar </span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="co">-- ok</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>func arg1 arg2 <span class="ot">=</span> </span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">do</span> </span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>        foo</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>        bar </span></code></pre></div>
<p>아래처럼 <code>do</code>보다는 들여 쓰는 건 되고,</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- ok</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>func arg1 arg2 <span class="ot">=</span> <span class="kw">do</span> </span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>                    foo</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>                    bar</span></code></pre></div>
<p>다음 들여 쓰기는 안 될 것처럼 보입니다. 하지만, <em>(4)표현식의 시작이 라인의 시작에 있지 않을 때</em><a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>는, 표현식의 시작을 포함하고 있는 라인보다만 들여 쓰기 하면 됩니다.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- ok</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>func arg1 arg2 <span class="ot">=</span> <span class="kw">do</span> </span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>    foo</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>    bar</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="co">-- ok</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>func <span class="ot">=</span> <span class="dv">100</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>  <span class="op">-</span> <span class="dv">10</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a><span class="co">-- func를 표현식의 시작으로 보면 (1)번 규칙 끝나지 않은 수식으로 봐야하지 않을까요? </span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a><span class="co">-- 100을 시작으로 본다면 (4)번 규칙을 적용해야 합니다.</span></span></code></pre></div>
<p>그럼 다음 <code>where</code>절의 들여 쓰기는 어떨까요?</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- error</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>main <span class="ot">=</span> <span class="kw">do</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>    myPrint</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  <span class="kw">where</span> myPrint <span class="ot">=</span> <span class="co">-- 끝나지 않은 표현식 </span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">putStrLn</span> <span class="st">&quot;ok&quot;</span></span></code></pre></div>
<p><code>myPrint</code>가 라인 시작에 있지 않으니, (4)번 규칙에 따라 가능해야 할 것 같은데, 다음처럼 들여 써야만 합니다.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- ok</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>main <span class="ot">=</span> <span class="kw">do</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>    myPrint</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  <span class="kw">where</span> myPrint <span class="ot">=</span> </span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>         <span class="fu">putStrLn</span> <span class="st">&quot;ok&quot;</span> <span class="co">-- 한 칸이라도 myPrint 함수명보다는 들여 쓰기 해야합니다.</span></span></code></pre></div>
<p>일단, (1)번 규칙을 적용하면, <code>where</code>까지도 들여 쓰기에 포함해서 봐야하니, <code>myPrint</code>의 <code>m</code>보다는 들여 쓰기 해야합니다. 하지만, <code>do</code>를 써주면 함수명과 동일한 시작점까진 됩니다.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- ok</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>main <span class="ot">=</span> <span class="kw">do</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>    myPrint</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="kw">where</span> myPrint <span class="ot">=</span> <span class="kw">do</span> </span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>        <span class="fu">putStrLn</span> <span class="st">&quot;ok&quot;</span> <span class="co">-- do를 쓰면 함수명과 갈은 위치까지는 됩니다.</span></span></code></pre></div>
<p>이쯤되면 규칙이 뭘지 혼란스럽습니다.</p>
<p>그냥 직관으론 다 알 수 없는 규칙이 있습니다. 바로 <em>(5) 레이아웃 키워드 let, where, of, do 중에 하나가 오면 들여 쓰기를 리셋하고 새로운 레이 아웃을 시작</em>한다는 규칙<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a>입니다. 위 예들은 <code>where</code>로 리셋하고 첫 시작하는 라인이 (3)번 규칙에 따라 <code>공백 2 + where 5글자 + 공백 1</code> 해서 총 8글자 들여 쓰기로 시작합니다. 첫 번째 <code>where</code> 예시는 <code>do</code>가 없는 경우는 리셋이 안되니, 아직 끝나지 않은 표현식은 (1)번 규칙에 따라 더 들여 써야 합니다.</p>
<p>여기까지 wikibook 내용을 요약하며 곰곰히 보니 <em>함수명을 표현식의 시작</em>으로 보면 (1)번 끝나지 않은 표현식, (2)번 같은 레벨은 같은 들여쓰기, (3)번 레이아웃 키워드는 들여 쓰기에 포함된다는 규칙 세가지만 있으면, 다른 규칙은 없어도 위의 예시들이 모두 맞아 들어갑니다. wikibook은 실제 스펙 그대로가 아니라 풀어서 설명한 것으로, 실제 하스켈 스펙은 다음 사이트에 있습니다. <a href="https://www.haskell.org/onlinereport/haskell2010/haskellch10.html#x17-17800010.3" class="uri">https://www.haskell.org/onlinereport/haskell2010/haskellch10.html#x17-17800010.3</a> 실제 스펙으로 이해하기에는 다소 난해하긴 합니다.</p>
<section class="footnotes" role="doc-endnotes">
<hr />
<ol>
<li id="fn1" role="doc-endnote"><p>wikibook엔 (4)번 표현식 시작이 라인 시작에 없을 때의 규칙 설명이 있습니다. 하지만, 없어도 (1)번과 (5)번 규칙으로 정해질 것 같은데, GHC 내부에 구현되어 있는 규칙이 뭔지 궁금합니다.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2" role="doc-endnote"><p>wikibook 설명엔 다음과 같이 되어 있습니다.<br />
If you see one of the layout keywords, (<code>let</code>, <code>where</code>, <code>of</code>, <code>do</code>), insert an open <code>curly brace</code> (right before the stuff that follows it)<br />
C언어처럼 <code>let {</code>, <code>where {</code>, <code>of {</code>, <code>do {</code> 중괄호를 넣어서 읽으면 된다고 되어 있는 걸, 동작에 맞춰 말을 바꿨습니다. <code>{</code> 중괄호를 넣는다는 건 새로운 레이아웃을 시작한다는 말입니다.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>

<div class="comment">
<script src="https://utteranc.es/client.js" repo="lionhairdino/lionhairdino.github.io" issue-term="url" theme="github-light" crossorigin="anonymous" async>
</script>
</div>
        </div>
        <div id="footer">
            © 2021 lionhairdino. All rights reserved. Generated by <a href="http://jaspervdj.be/hakyll">Hakyll</a>
        </div>
    </body>
</html>
