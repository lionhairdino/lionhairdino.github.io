<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ko" lang="ko">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />

        <title>lionhairdino - Computation과 Runtime으로 분리해서 본 요네다 보조 정리</title>

        <meta name="description" content="lionhairdino - Computation과 Runtime으로 분리해서 본 요네다 보조 정리" />
        <meta property="og:description" content="하스켈 함수형 프로그래밍" />

        <link rel="stylesheet" type="text/css" href="../css/default.css" />
        <link rel="icon" href="https://lionhairdino.github.io/favicon.svg" />
        <link rel="icon" type="image/png" href="../images/favicon/Lionhairdino16px.png" sizes="16x16" />
        <link rel="icon" type="image/png" href="../images/favicon/Lionhairdino24px.png" sizes="24x24" />
        <link rel="icon" type="image/png" href="../images/favicon/Lionhairdino32px.png" sizes="32x32" />
        <link rel="icon" type="image/png" href="../images/favicon/Lionhairdino48px.png" sizes="48x48" />
        <link rel="icon" type="image/png" href="../images/favicon/Lionhairdino57px.png" sizes="57x57" />
        <link rel="icon" type="image/png" href="../images/favicon/Lionhairdino60px.png" sizes="60x60" />
        <link rel="icon" type="image/png" href="../images/favicon/Lionhairdino64px.png" sizes="64x64" />
        <link rel="icon" type="image/png" href="../images/favicon/Lionhairdino72px.png" sizes="72x72" />
        <link rel="icon" type="image/png" href="../images/favicon/Lionhairdino76px.png" sizes="76x76" />
        <link rel="icon" type="image/png" href="../images/favicon/Lionhairdino114px.png" sizes="114x114" />
        <link rel="apple-touch-icon-precomposed" href="../images/favicon/Lionhairdino120px.png" sizes="120x120" />
        <link rel="apple-touch-icon-precomposed" href="../images/favicon/Lionhairdino144px.png" sizes="144x144" />
        <link rel="shortcut icon" href="../favicon.ico" />
        <link rel="apple-touch-icon-precomposed" href="../images/favicon/Lionhairdino152px.png" sizes="152x152" />
        <link rel="apple-touch-icon-precomposed" href="../images/favicon/Lionhairdino180px.png" sizes="180x180" />
        <link rel="icon" type="image/png" href="../images/favicon/Lionhairdino192px.png" sizes="192x192" />
        <link rel="manifest" href="../site.webmanifest" />
        <link rel="mask-icon" href="https://lionhairdino.github.io/Lionhairdino_black.svg" color="#ff7500" />
        <meta name="msapplication-TileImage" content="/images/favicon/Lionhairdino144px.png" />
        <meta name="msapplication-TileColor" content="#ff7500" />
        <meta name="theme-color" content="#ffffff" />
        <meta property="og:type" content="website" />
        <meta property="og:title" content="Computation과 Runtime으로 분리해서 본 요네다 보조 정리" />
        <meta property="og:site_name" content="Lionhairdino" />
        <meta property="og:url" content="https://lionhairdino.github.io/posts/2023-12-31-runtime.html" />

        <meta property="og:image" content="https://lionhairdino.github.io/images/state400px.png" />


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-E9WZ6VXGHP"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-E9WZ6VXGHP');
</script>
<script src="../script/copycode.js"></script>
<script async src="https://cse.google.com/cse.js?cx=9c53b4915cbb2605c"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.11.1/tocbot.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.11.1/tocbot.css" />
    </head>
    <body>
        <div id="header">
            <div style="display:inline-block;margin-right:5px;padding-top: 5px;" id="logo">
                <a href="../"><img style="width:30px;border:none" src="../images/favicon/Lionhairdino48px.png"></a>
            </div>
            <div style="display:inline-block;vertical-align: top;padding-top:5px;" id="navigation">
                <a href="../">lionhairdino</a>
                <a href="../about.html">about</a>
                <!--<a href="/archive.html">archive</a>-->
            </div>
            <div style="display:inline-block;font-size:0.8em;vertical-align: top;">
                <div style="display:inline-block;vertical-align: top;padding-top: 5px">사이트내 검색</div>
                <div style="display:inline-block;width:180px;"> 
                    <div class="gcse-searchbox-only"></div>
                </div>
            </div>
            <div>
                여기 글들은 일종의 질문입니다. 용어 선택도 학계, 업계에서 쓰는 걸로 되어 있지 않고, 틀린 내용이 있을 수도 있습니다.
            </div>
        </div>
        <div class="js-toc-content">
            <h1>Computation과 Runtime으로 분리해서 본 요네다 보조 정리</h1>
            <link rel="stylesheet" type="text/css" href="../css/syntax.css" />
<div class="info">
    Posted on December 31, 2023
    
</div>

<h2 id="요네다-보조-정리">요네다 보조 정리</h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode default"><code class="sourceCode default"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>Nat(Hom(_,A),F) ~= FA</span></code></pre></div>
<ul>
<li>임의의 펑터<code>F</code>를 대상<code>A</code>에 적용:<br />
<code>F:_ -&gt; 구현</code>을 <code>A</code>에 적용하면 <code>A -&gt; 구현</code>이 됩니다.</li>
<li>임의의 펑터<code>F</code>를 <code>A</code>를 가진 홈펑터와 차이로 변환:<br />
홈펑터<code>Hom(_,A)</code>와 <code>F</code>의 차이, 즉 자연 변환 <code>Φ</code>는 <code>_ -&gt; A</code>와 <code>_ -&gt; 구현</code>의 차이니 <code>A</code> <code>-&gt; 구현</code>이 됩니다.</li>
</ul>
<p><strong><code>Φ</code>에는 이미 <code>_-&gt;구현</code>도 <code>A</code>도 미리 들어가 있습니다.</strong></p>
<h2 id="생각-스트레칭">생각 스트레칭</h2>
<p>한 가지로 다루던 걸, 절차를 둘로 나눌 수 있다면, 둘을 각 각 다른 모듈에 넣을 수도 있습니다.<br />
[<code>A</code>] -&gt; [<code>B</code>] -&gt; [<code>R</code>]<br />
<code>B</code>를 둘로 나눈다면<br />
[<code>A</code> -&gt; <code>B.1</code>] -&gt; [<code>B.2</code> -&gt; <code>R</code>]<br />
이 가능해집니다.</p>
<p>게다가 이렇게 나눈 부분 중 일부가 범용적으로, 추상화할 수 있다면<br />
[<code>B</code>]는 [<code>B.1</code>-&gt; <code>G</code>]<br />
[<code>C</code>]는 [<code>C.1</code>-&gt; <code>G</code>]<br />
이렇게 공통된 <code>G</code>절차가 있다면,<br />
[<code>A</code> -&gt; <code>B.1</code>] -&gt; [<code>G</code> -&gt; <code>R</code>]<br />
[<code>A</code> -&gt; <code>C.1</code>] -&gt; [<code>G</code> -&gt; <code>R</code>]<br />
이 가능해집니다. 그럼 [<code>G</code>-&gt;<code>R</code>]을 한 가지만 구현해서 써먹을 수 있습니다.</p>
<h2 id="직관을-위한-상상">직관을 위한 상상</h2>
<p>상상입니다. 어떤 이론을 제시하는 게 아닌, 그저 상상입니다.</p>
<pre><code>\x-&gt;x+1</code></pre>
<p>값을 더하는 <code>x+1</code>은 언젠가 Runtime이 어떤 값을 넣어주며 돌아야 결과값을 만들 수 있습니다. Computation을 값으로 만드는 작업을 담당하는 절차, 혹은 작업자를 <strong>Runtime</strong>이라 부르겠습니다. Computation은 계산으로 바꿔서 쓸 수도 있지만, 컴퓨터가 작업자가 되어 계산식을 값으로 바꾼다는 의미가 드러나도록 <strong>Computation</strong>을 그대로 쓰겠습니다.</p>
<pre><code>1</code></pre>
<p><code>1</code>이라는 <strong>값</strong>과 <code>\x-&gt;x+1</code>라는 <strong>Computation</strong> 구분이 생겼습니다. 세상 모든 걸 한가지로 봐야, 모노이드스럽게 봐야 편할텐데 말입니다. <code>1</code>과 <code>\x-&gt;x+1</code>의 차이는 마치 Computation이란 절차가 있는 것과 없는 것으로, 하나는 Runtime이 필요 없는 것과, 필요로 하는 것으로 구분되어 보입니다. 여기서 아래와 같이 뒤집어 상상해 봤습니다.</p>
<p>우리가 원하는 세상은 값의 세상이 아니라, Computation의 세상입니다. <code>1</code>을 Computation의 세상으로 끌어 올리려면lift <code>1</code>을 Runtime이 해석하는 절차를 두면 됩니다. Runtime이 가장 기본적으로 <code>Id</code>를 가지고 해석한다고 상상할 수 있습니다.</p>
<p><strong>값은 Computation과 Runtime 해석 절차가 있고, Computation은 Computation만 있고 Runtime 해석 절차가 빠진 상태다.</strong></p>
<p><code>1</code>은 Computation으로, <code>Id</code>를 가진 Runtime을 돌린 상태입니다. <code>\x-&gt;x+1</code>은 런타임이 <code>x</code>를 받아서 <code>x+1</code>작업을 할 Computation입니다. 함수(혹은 연산자operator)는 Runtime 절차가 빠져 있는 상태입니다. 전자를 [<strong>Computation + Runtime</strong>]이라 표현하고, 후자를 [<strong>Computation</strong>]이라 표현하겠습니다. (<code>1</code>을 해석할 방법으로 <code>Id</code>만이 아니라, 어떤 Computation이든 <code>1</code>을 받을 수 있으면 상관 없습니다.)</p>
<p>최종 우리가 필요로 하는 건, 언젠가 Runtime이 돌아 값으로 결정 되어야 하지만, 이 둘을 분리하여, 매 번 Runtime이 돌지 않고, Compuation을 쌓아놨다 필요할 때 한 번에 Runtime들이 돌게 할 수 있습니다. 매 순간 항상 값이 필요한 건 아닙니다.</p>
<p>펑터는 Computation만 있는 상태인데, 여기에 Computation에 쓸 정보를 미리 넣어둘 수도 있습니다. 예를 들면, <code>+</code>계산에 <code>1+</code>처럼 미리 값 <code>1</code>을 넣어 두는 것 처럼요. 그런데, <code>1</code>이라는 [Computation + Runtime]을 넣지 않고, <code>1</code>의 [Runtime]만 넣어 두는 걸 상상해 보겠습니다. <code>1</code>을 넣는 것이 아닌, <code>1</code>을 해석할 Runtime만 넣어줍니다.</p>
<p>요네다 레마는<br />
<code>A</code>라는 [Computation + Runtime]에 펑터를 적용하는 것과,<br />
[<code>A</code> Computation]에 [<code>A</code> Runtime]을 미리 갖고 있는 펑터를 적용하는 것이<br />
일대일 대응이다란 말로 상상해 볼 수 있습니다.</p>
<p><strong>홈펑터 <code>Hom(-,A)</code> Computation은 <code>A</code>라는 [Computation + Runtime]이 아닌 [Runtime]만 미리 넣어 두었습니다.</strong></p>
<p>홈펑터로 변환한 세계에 있는 것들과 어떤 작업을 한다면 <code>A</code>와 연관성을 끊을 수 없습니다. 이 세계에 있는 모든 것들은 <code>A</code>와 연관된 Computation을 가진 상태입니다.</p>
<p>변환한 세계 자체보다는 변환 작업을 하는 홈펑터 Computation에 집중해서 보겠습니다.</p>
<p>임의의 펑터와 <code>Hom(-,A)</code>의 차이(변환)를 <code>Φ</code>로 두면,</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode default"><code class="sourceCode default"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>F(f) : Φ_A id_A -&gt; Φ_x f</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>F(f) :     F(A) -&gt; F(X)</span></code></pre></div>
<p><code>Φ</code>에는 이미, 항상 다른 것과 붙여 쓸 <code>A</code> Runtime을 가지고 있습니다.
하스켈 코드로 보면,<br />
<span class="citation" data-cites="todo">@todo</span> 글 처음에 있는 요네다 식은 Contravariant로 표현하고, 아래 하스켈 코드는 Covariant로 예를 들고 있다. 한 쪽으로 고칠 것</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode default"><code class="sourceCode default"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>forall r. ((a -&gt; r) -&gt; f r) ~= f a</span></code></pre></div>
<p>위 <code>(a-&gt;r)</code>펑터와 <code>f</code>펑터의 자연 변환은 <code>a</code> Runtime을 이미 가지고 있습니다. 여기에 <code>f</code>를 적용해서 결과를 얻습니다.</p>
<h2 id="결론">결론</h2>
<p>모나드에서 이항 연산의 절차를 둘로 나눴듯이, 여기선 더 강력하게 세상 모든 대상을, 하나로만 보이던 절차를 둘로 나눈 느낌입니다. 지금 노리고 있는 생각 방식이, 모나드도, Adjunction도, 요네다도 모두 기존 하나의 절차(원래부터 둘이었지만, 우리는 하나로 인식하고 있던)를 나누며 얻게되는 구조 변화에 대한 얘기를 하고 있다고 해석해보려 하고 있습니다. 틀린 것으로 결론 나면 삭제할 예정인, 그저 부정확할 수 있는 <strong>블로그 글</strong>입니다.</p>

<div class="comment">
<script src="https://utteranc.es/client.js" repo="lionhairdino/lionhairdino.github.io" issue-term="url" theme="github-light" crossorigin="anonymous" async>
</script>
</div>
<div style="text-align:right">Github 계정이 없는 분은 메일로 보내주세요. lionhairdino at gmail.com </div>
        </div>
        <nav class="toc toc-right js-toc relative z-1 transition--300 absolute pa4 pt5 is-position-fixed"></nav>
        <div id="footer">
            © 2022 lionhairdino. All rights reserved. Generated by <a href="http://jaspervdj.be/hakyll">Hakyll</a>
        </div>
        <script>
            tocbot.init({
                tocSelector: '.js-toc',
                contentSelector: '.js-toc-content',
                headingSelector: 'h2, h3',
                hasInnerContainers: true,
            });
        </script>
    </body>
</html>
