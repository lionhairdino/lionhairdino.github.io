<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ko" lang="ko">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <title>lionhairdino - 하스켈에 대한 오해</title>
        <meta name="description" content="Haskell,하스켈,해스클">
        <meta charset="UTF-8">
        <link rel="stylesheet" type="text/css" href="../css/default.css" />
        <meta property="og:type" content="website">
        <meta property="og:title" content="lionhairdino">
        <meta property="og:description" content="Haskell,하스켈,해스클">
        <meta property="og:url" content="https://lionhairdino.github.io">
    </head>
    <body>
        <div id="header">
            <div id="logo">
                <a href="../">lionhairdino</a>
            </div>
            <div id="navigation">
                <a href="../about.html">about</a>
                <!--<a href="/archive.html">archive</a>-->
            </div>
        </div>

        <div id="content">
            <h1>하스켈에 대한 오해</h1>

            <link rel="stylesheet" type="text/css" href="../css/syntax.css" />
<div class="info">
    Posted on June 17, 2020
    
</div>

<h3 id="변수가-없다">변수가 없다?</h3>
<p>보통 변수가 존재하지 않고, 대입이라는 개념이 없다고 설명하지만, 이들 없이 실용 프로그램을 만들기 어렵습니다. 상태가 계속 바뀌어 가면서, 상태에 따른 처리를 하는 프로그램들이 대부분인데, 상태를 넣어 둘 “변수” 없이 하스켈로 무엇을 할 수 있을까요? 명령형 언어에서처럼 아무데서나 “편하게 쓰지 못하도록” 해 놨을 뿐이지, 하스켈에도 같은 목적으로 만든 라이브러리들이 존재 합니다.(물론, 이런 “불편함” 덕에 좀 더 함수형으로 생각할 수 있게 합니다.) 바로 IORef, MVar, STM 의 존재입니다. 이들은 거의 전역 변수처럼 쓰입니다. 언어 자체에 빌트인 되어 있는 기능들은 아니지만, 실용 프로그램을 만들려면 반드시 이들의 도움을 받아야 합니다. 정리하면 변수는 없지만, <em>변수와 같은 일을 하는 라이브러리</em>가 있어, 실용 프로그램을 만들 때 “변수의 개념”을 아예 빼고 로직을 세우는 건 아닙니다.</p>
<h3 id="모나드는-비순수-작업을-순수하게-처리한다">모나드는 비순수 작업을 순수하게 처리한다?</h3>
<p>(동일한 입력에 다른 값을 돌려준다거나, 매개 변수에 없는 정보를 접근한다거나 바꿔놓는다거나 하면 Side Effect가 있다고 말합니다. Side Effect를 부작용, 부수효과라고 번역하곤 하는데, 실제 뜻과는 좀 거리가 있어 보이는 번역입니다. 여기서는 Side Effect를 따로 떼어내서 번역하지 않고, Side Effect를 가진 작업을 비순수 작업이라고 부르겠습니다.)</p>
<p>모나드는 비순수 작업을 순수한 모양으로 다룰 수 있게 해 준다고 하는데, 쉽게 얘기하면 비순수 작업과 같은 결과를 가져오는 그냥 좀 복잡한 순수 작업입니다. 무슨말이냐 하면,</p>
<p>f, g, h… 함수 모두가 env 값이 필요하다면, 함수 바깥에 전역 변수같은 걸 둘 수 있는 비함수형에서는 함수들이 공유하는 바깥 스코프에 env를 정의하고, 각 함수에서 접근합니다. 하지만 순수 함수는 매개 변수를 통해서만 외부의 정보를 가져올 수 있습니다. 이럴 경우 해결책은? f, g, h … 모든 함수에 env 매개 변수를 만들고, 함수를 부를 때마다 env 를 넘겨주면 됩니다. 좀 귀찮을 뿐이지만 목표는 달성할 수 있습니다. 정말 단순한 생각이라, 하스켈은 이 것말고 뭔가 특별한 개념으로 처리하는 게 아닐까 하고 넘겨 짚습니다. 아닙니다. 모든 함수에 env 를 넘기는 단순한 방법으로 해결합니다. 단, 프로그래머가 신경쓰지 않도록 <em>“가려”</em>줍니다. [1] 실용 프로그램에서 필요한 수많은 비순수 작업들을, 지루한 방법으로 순수 형태로 해결하는데 이를 <em>모나드 패턴을 써서 가립니다.</em> 대부분의 비순수 작업들은 성가신 작업들을 우직하게 밀고 나가면 순수 작업들로도 같은 결과를 가져 올 수 있습니다.</p>
<p>예를 들어 보면, random 함수를 어떻게 구현할까요? 입력이 같으면 출력이 항상 같아야 하는데, 어떻게 해결할까요? 특별한 방법이 없습니다. 함수를 부를 때마다, 매번 다른 입력값을 주면 됩니다. 진짜로 이렇게 구현합니다. 하지만 모나드 패턴을 이용해 프로그래머는 비순수 언어에서 쓰는 것과 비슷한 모양으로 random 함수를 쓸 수 있습니다.</p>
<p>전역 변수가 없으니 상태를 기억시킬 방법이 없습니다. 어떻게 해결할까요? 상태를 바꾸는 함수가 작업이 끝나면, 상태를 결과로 내 뱉고, 그 다음 함수가 상태를 받아 작업을 하고, 또 결과와 상태를 뱉고… 이렇게 매개 변수에 상태를 두어 해결하면 됩니다. 진짜로 이렇게 해결합니다.하지만, 상태를 넘기고 받는 작업은 다른 안보이는 함수에게 맡겨서 불편하지 않게 해 줍니다.[2]</p>
<p>모나드는 비순수 작업을 다른 형태의 순수 작업으로 구현한 걸 보기 좋게, 쓰기 좋게 만들어 주는 코드 패턴입니다.</p>
<hr />
<p>[1] Reader 모나드<br />
[2] Status 모나드</p>

<div id="disqus_thread"></div>
<script>

var disqus_config = function () {
this.page.url = 'https://lionhairdino.github.io/posts/2020-06-17-MisunderstandingHaskell.html';
this.page.identifier = 'posts/2020-06-17-MisunderstandingHaskell.markdown';
};
(function() {
var d = document, s = d.createElement('script');
s.src = 'https://lionhairdino.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
                            
        </div>
        <div id="footer">
            © 2020 lionhairdino. All rights reserved. Generated by <a href="http://jaspervdj.be/hakyll">Hakyll</a>
        </div>
    </body>
</html>
