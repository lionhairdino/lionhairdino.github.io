<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ko" lang="ko">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />

        <title>lionhairdino - 비수학인이 해석한 모노이드 - 모노이드가 왜 중요할까?</title>

        <meta name="description" content="수학 용어인 모노이드에서, 비수학인이 필요한 정보만 빼내서, 혹은 프로그래머 시각에서 보는 제 멋대로 상상 글입니다." />
        <meta property="og:description" content="수학 용어인 모노이드에서, 비수학인이 필요한 정보만 빼내서, 혹은 프로그래머 시각에서 보는 제 멋대로 상상 글입니다." />

        <link rel="stylesheet" type="text/css" href="../css/default.css" />
        <link rel="icon" href="https://lionhairdino.github.io/favicon.svg" />
        <link rel="icon" type="image/png" href="../images/favicon/Lionhairdino16px.png" sizes="16x16" />
        <link rel="icon" type="image/png" href="../images/favicon/Lionhairdino24px.png" sizes="24x24" />
        <link rel="icon" type="image/png" href="../images/favicon/Lionhairdino32px.png" sizes="32x32" />
        <link rel="icon" type="image/png" href="../images/favicon/Lionhairdino48px.png" sizes="48x48" />
        <link rel="icon" type="image/png" href="../images/favicon/Lionhairdino57px.png" sizes="57x57" />
        <link rel="icon" type="image/png" href="../images/favicon/Lionhairdino60px.png" sizes="60x60" />
        <link rel="icon" type="image/png" href="../images/favicon/Lionhairdino64px.png" sizes="64x64" />
        <link rel="icon" type="image/png" href="../images/favicon/Lionhairdino72px.png" sizes="72x72" />
        <link rel="icon" type="image/png" href="../images/favicon/Lionhairdino76px.png" sizes="76x76" />
        <link rel="icon" type="image/png" href="../images/favicon/Lionhairdino114px.png" sizes="114x114" />
        <link rel="apple-touch-icon-precomposed" href="../images/favicon/Lionhairdino120px.png" sizes="120x120" />
        <link rel="apple-touch-icon-precomposed" href="../images/favicon/Lionhairdino144px.png" sizes="144x144" />
        <link rel="shortcut icon" href="../favicon.ico" />
        <link rel="apple-touch-icon-precomposed" href="../images/favicon/Lionhairdino152px.png" sizes="152x152" />
        <link rel="apple-touch-icon-precomposed" href="../images/favicon/Lionhairdino180px.png" sizes="180x180" />
        <link rel="icon" type="image/png" href="../images/favicon/Lionhairdino192px.png" sizes="192x192" />
        <link rel="manifest" href="../site.webmanifest" />
        <link rel="mask-icon" href="https://lionhairdino.github.io/Lionhairdino_black.svg" color="#ff7500" />
        <meta name="msapplication-TileImage" content="/images/favicon/Lionhairdino144px.png" />
        <meta name="msapplication-TileColor" content="#ff7500" />
        <meta name="theme-color" content="#ffffff" />
        <meta property="og:type" content="website" />
        <meta property="og:title" content="비수학인이 해석한 모노이드 - 모노이드가 왜 중요할까?" />
        <meta property="og:site_name" content="Lionhairdino" />
        <meta property="og:url" content="https://lionhairdino.github.io/posts/2023-02-16-monoid.html" />

        <meta property="og:image" content="https://lionhairdino.github.io/images/state400px.png" />

      <meta name="keywords" content="monoid, monad, 모노이드, 모나드, 일반화, 특수화, oid">
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-E9WZ6VXGHP"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-E9WZ6VXGHP');
</script>
<script src="../script/copycode.js"></script>
<script async src="https://cse.google.com/cse.js?cx=9c53b4915cbb2605c"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.11.1/tocbot.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.11.1/tocbot.css" />
    </head>
    <body>
        <div id="header">
            <div style="display:inline-block;margin-right:5px;padding-top: 5px;" id="logo">
                <a href="../"><img style="width:30px;border:none" src="../images/favicon/Lionhairdino48px.png"></a>
            </div>
            <div style="display:inline-block;vertical-align: top;padding-top:5px;" id="navigation">
                <a href="../">lionhairdino</a>
                <a href="../about.html">about</a>
                <!--<a href="/archive.html">archive</a>-->
            </div>
            <div style="display:inline-block;font-size:0.8em;vertical-align: top;">
                <div style="display:inline-block;vertical-align: top;padding-top: 5px">사이트내 검색</div>
                <div style="display:inline-block;width:180px;"> 
                    <div class="gcse-searchbox-only"></div>
                </div>
            </div>
            <div>
                여기 글들은 일종의 질문입니다. 용어 선택도 학계, 업계에서 쓰는 걸로 되어 있지 않고, 틀린 내용이 있을 수도 있습니다.
            </div>
        </div>
        <div class="js-toc-content">
            <h1>비수학인이 해석한 모노이드 - 모노이드가 왜 중요할까?</h1>
            <link rel="stylesheet" type="text/css" href="../css/syntax.css" />
<div class="info">
    Posted on February 16, 2023
    
</div>

<p>완벽한 학문적 정의를 풀어쓰려는 글이 아닙니다. 비수학인인 프로그래머로서 관심을 가지는, 모노이드 속성에 관한 얘기입니다. 믿을만한 어디 텍스트를 읽고 생각을 정리한 글이 아니니, 매우 얼기 설기한 생각일 것으로 예상됩니다. “이렇게 이해, 혹은 <em>오해</em>를 하는 사람도 있구나” 정도로 읽어주세요. 오해로 판단된다면 꼭 댓글 부탁드립니다.</p>
<p>“한 가지 모양으로 보자”</p>
<p>제가 생각하는 모노이드는 바로 위 문장에 관한 얘기입니다.</p>
<h2 id="모노이드monoid-단어">모노이드monoid 단어</h2>
<p>어미에 <code>~oid</code>가 붙으면, “딱 그 건 아닌데, 그 것 같은 것들”을 뜻합니다. <code>humanoid</code>, <code>android</code>, <code>roboid</code> 주로 인간을 흉내 내는 인간 같은 로봇에 붙는 말등으로 만났던 말입니다. 뭔가 <code>mono</code>는 아닌데, <code>mono</code>같은, <code>mono</code>로 볼 수 있는 무언간가 봅니다.</p>
<h2 id="수학에서-모노이드">수학에서 모노이드</h2>
<p>어떤 시스템에 이항 연산이 있고, 항등원이 존재하고, 이 이항 연산이 닫혀 있으면 어떤 것이든 모노이드라 부릅니다.</p>
<p>(※ 이 정의만으론, 어떻게 함수형 프로그래밍과 연결되는지 알게되는데까지 정말 많은 시간과 노력이 필요합니다.)</p>
<h2 id="수학-모노이드-설명을-내가-필요한대로-해석">수학 모노이드 설명을 내가 필요한대로 해석</h2>
<p>여기서, 말을 잘 못하면 완벽한 해석을 주장하는 것으로 오해 받을 수 있어, 다음 말부터 조심스럽게 강조하고 이어 가겠습니다.</p>
<p>“지금 여기서 얘기하는 것이 모노이드의 모든 특징”</p>
<p>이란 말을 하고 싶은 게 아닙니다. 딱, 제가 프로그래밍할 때 필요한 정보만 꺼내보면, 혹은 프로그래밍 관점에서 수학의 정의를 해석하면 아래와 같이 볼 수 있다는 걸 말하는 중입니다.</p>
<p>“어떤 시스템이 있고, 이항 연산과 항등원이 존재해서 이 시스템에 있는 구성 요소는 모두 <em>이 연산이 쓰인 한 가지 모양으로 표현</em>할 수 있다”</p>
<p>이 말을, 사례를 들어 풀어 보면 다음과 같습니다.</p>
<h2 id="자연수-더하기-모노이드">자연수, 더하기 모노이드</h2>
<p><code>0</code>이 없는 자연수 시스템이 있습니다. <code>1,2,3...</code><br />
그리고, 더하기 <code>(+)</code> 이항 연산이 있습니다.<br />
<code>2</code>는 <code>1</code>과 <code>1</code>을 더한 것으로 표현할 수 있습니다. <code>2 = 1 + 1</code><br />
<code>3</code>은 <code>1</code>과 <code>2</code>를, 혹은 <code>2</code>와 <code>1</code>을 더한 것으로 표현할 수 있습니다. <code>3 = 1 + 2</code></p>
<p>그럼 <code>1</code>을 더하기를 쓴 모양으로 표현하려면 어떻게 할까요?</p>
<p>지금 상황에선 표현할 방법이 없습니다.</p>
<p>여기에, <code>0</code>을 추가해 보겠습니다. <code>1</code>이나 <code>2,3,4...</code> 어떤 구성 요소에 더하기 <code>0</code>을 하면, 원래 숫자가 그대로 나옵니다. “아무 일도 일어나지 않습니다.” (추가적인 조건을 엄밀하게 만족하면 항등원Identity이라 부릅니다만, 섣부른 정의는 오해를 살 수 있으니, 정교한 정의는 추상 대수학등을 참고 해주시고, 여기서는 필요한 뜻만 보겠습니다.) 이 <code>0</code>을 이용하면 비로소 <code>1</code>도, 지금 새롭게 추가하는 <code>0</code>도 더하기를 쓴 모양으로 표현할 수 있게 됩니다.</p>
<p><code>1</code>은 <code>0</code>과 <code>1</code>을 더한 것으로 표현할 수 있습니다. <code>1 = 1 + 0</code><br />
<code>0</code>은 <code>0</code>과 <code>0</code>을 더한 것으로 표현할 수 있습니다. <code>0 = 0 + 0</code></p>
<p>시스템에 <code>0</code>을 추가하면서, <code>0</code>을 포함한 모든 구성 요소를 <code>_ + _</code> 꼴로 표현할 수 있게 되었습니다. <code>0</code>이 있어, <em>모든 구성 요소를 하나의 모양으로 추상화</em>할 수 있게 되었습니다. 이 “추상화” 말이 불편한 분은, 모두 같은 모양으로 표현할 수 있게 됐다로 넘어가도 좋습니다.</p>
<p>모두 같은 모양으로 볼 수 있다는 건 대단한 특징입니다. 이 이유에 대해선 아래 결론 부분에서 보겠습니다.</p>
<h2 id="모노이드">_ -&gt; _ , (.) 모노이드</h2>
<p>※ 혹 <code>forall a</code>에 대해 알고 있다면, <code>_</code>는 <code>forall a</code>를 의미합니다.</p>
<p>구성 요소가 자연수가 아닌 <code>_ -&gt; _</code> 형태의 함수일 경우를 보겠습니다. 짧게 쓰기 위해 <code>_ -&gt; _</code>를 <code>Func</code> 모양이라 부르겠습니다.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="kw">type</span> <span class="dt">Func</span> <span class="ot">=</span> _ <span class="ot">-&gt;</span> _</span></code></pre></div>
<p><code>f, g, h ... :: Func</code> 라는 구성 요소들이 존재하고, 이들 사이의 관계를 표현하는 이항 연산 <code>(.)</code>이 있습니다. 이 연산은 먼저 들어온 함수를 적용현 결과를 다음 함수의 입력으로 넣어주는 함수입니다.</p>
<p><code>h = g . f</code><br />
<code>i = h . g</code><br />
…</p>
<p>반드시 더하기와 같은 동작을 할 필요는 없고, 어찌 됐든 구성 요소, 즉 모든 <code>Func</code> 함수는, <code>Func</code>들을 <code>(.)</code>로 엮은 걸로 표현할 수 있게 하고 싶습니다. (왜 이렇게 하고 싶냐는 결론에서 보겠습니다.) 어찌 됐든 지금은 <em>한 가지 모양으로 표현</em> 된다는 것만 보시기 바랍니다.</p>
<p>여기서도 더 이상 <code>(.)</code>을 쓴 모양으로 쪼개지지 않는 함수가 있다고 보겠습니다. 이런 경우에도 만일 “아무 것도 안함”이란 요소가 존재한다면, 위 자연수 경우처럼 <code>Func</code>가 구성 요소인 시스템의 모든 구성 요소를 <code>(.)</code> 모양으로 표현할 수 있습니다. 이 경우 자연수의 항등원과 같은 역할을, <code>id</code>함수가 합니다.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="dt">Func</span> <span class="op">.</span> <span class="fu">id</span> <span class="ot">=</span> <span class="dt">Func</span></span></code></pre></div>
<h2 id="m-_-가-구성-요소인-모노이드">_ -&gt; m _ 가 구성 요소인 모노이드</h2>
<p>구성 요소가 <code>_ -&gt; _</code> 형태가 아니라, <code>_ -&gt; m _</code> 형태의 구성 요소들이 있고 <code>(.)</code>이 있는 경우를 보겠습니다. 표현하기 편하게</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="kw">type</span> <span class="dt">Action</span> <span class="ot">=</span> _ <span class="ot">-&gt;</span> m _  </span></code></pre></div>
<p><code>Action</code>이라 부르겠습니다.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="dt">Action</span> <span class="op">.</span> <span class="dt">Action</span> <span class="ot">=</span> <span class="dt">Action</span></span></code></pre></div>
<p>즉, 모든 <code>Action</code>을 <code>Action . Action</code> 모양으로 보는 게 목표입니다.</p>
<p>처음 함수에 적용하면 결과는 <code>m _</code>가 되고, 이를 두 번째 함수의 입력으로 넣어 주면 결과는 <code>m (m _)</code>가 됩니다. 즉 <code>Action :: _ -&gt; m _</code>와 <code>Action :: _ -&gt; m _</code>를 <code>(.)</code>로 연산하니, 합성의 결과는 <code>_ -&gt; m (m _)</code>가 돼버렸습니다.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="dt">Action</span> <span class="op">.</span> <span class="dt">Action</span> <span class="ot">=</span> _ <span class="ot">-&gt;</span> m (m _) <span class="co">-- 결과가 Action :: _ -&gt; m _ 모양이 아닙니다.</span></span></code></pre></div>
<p>시스템의 모든 <code>Action</code>을 <code>(.)</code>을 쓴 모양으로 표현이 불가능한 상황입니다. 즉, 이 상태에선 모노이드가 아닙니다.</p>
<h3 id="join">join</h3>
<p>그런데, 여기에 <code>join :: m (m _) -&gt; m _</code>이란 함수가 있다면 어떻게 될까요? <code>(.)</code>을 적용 후 연이어 <code>join</code>을 적용하면 <code>_ -&gt; m _</code>가 되니, 구성 요소들을 모두 <code>(.)적용후 join</code>로 표현할 수 있을 것처럼 보입니다.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="dt">Action</span> <span class="ot">`(.) 적용 후 join`</span> <span class="dt">Action</span> <span class="ot">=</span> <span class="dt">Action</span></span></code></pre></div>
<p>하지만, 아직 해결되지 않았습니다. 한 가지 더 필요한 게 있습니다.</p>
<h3 id="return">return</h3>
<div class="sourceCode" id="cb7"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="dt">Action</span> <span class="ot">`(.) 적용 후 join`</span> <span class="fu">id</span> <span class="ot">=</span> <span class="dt">Action</span></span></code></pre></div>
<p>이 되야 하는데, <code>_ -&gt; m _</code> 와 <code>id</code>에 <code>(.)</code>를 적용하면, 이 번엔 결과가 그 대로 <code>_ -&gt; m _</code> 이어서 <code>join</code>을 적용할 수 없습니다. 그래서, <code>return :: _ -&gt; m _</code>를 정의해서 <code>id</code>의 경우에는</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="dt">Action</span> <span class="ot">`(.) 적용 후 join`</span> (<span class="fu">return</span> <span class="fu">id</span>) <span class="ot">=</span> <span class="dt">Action</span></span></code></pre></div>
<p>이 되게 하면, 비로소 <code>id</code>를 포함한 모든 구성 요소를 한 가지 <code>(.) 적용 후 join</code> 모양으로 표현할 수 있게 되었습니다.</p>
<h2 id="모나드는-모노이드의-일반화">모나드는 모노이드의 일반화</h2>
<p>눈치 채셨겠지만, 위는 알고 계신 바와 같이 바로 모나드입니다. <code>join</code>, <code>return</code> 의 도움을 받아 Action과 <code>(.)</code>이 모노이드가 되는 걸 모나드라 합니다. ※ <code>join</code>과 <code>return</code>은 <code>(.)</code>란 함수를 변환하는 고차 함수로 카테고리 이론에선 <code>Natural Transform</code>이라 부릅니다.</p>
<p>그동안 봐왔던 모노이드를 바로 이 모나드로 표현할 수 있습니다.</p>
<p>바로 <code>Func</code>와 <code>(.)</code> 모노이드는 <code>return</code>과 <code>join</code>이 아무 것도 안하는 모나드에 해당하는 특수한 경우로 볼 수 있습니다.</p>
<h2 id="왜-한-가지-모양으로-보는-게-중요할까">왜, 한 가지 모양으로 보는 게 중요할까?</h2>
<p>함수형은 계속 함수가 함수를 감싸는 모양이 되는데, 만일 <code>m a</code>를 입력으로 받아야 하는 함수가 있고 모나드라면, 여기에는 <code>m a</code>도, <code>m (m a)</code>도, <code>m (m (m ...</code>도 넘길 수 있게 됩니다. 이 게 가능하게 되면 함수 합성을 덩어리, 덩어리로 쪼개어 모듈화가 가능해집니다.</p>
<p>하스켈로 얘기하면, <code>Maybe</code> 타입이 있는데, <code>Action1</code>의 결과도 <code>Maybe</code>이고, <code>Action2</code>의 결과도 <code>Maybe</code>이면 이 두 Action을 <code>(.)</code>, <code>join</code>, <code>return</code> 으로 합성해서, 타입이 변하지 않는 같은 타입의 <code>Action3</code>을 만들어 낼 수 있다는 말입니다.</p>
<p>어떤 함수가 <code>Action</code>을 받는다면 이 함수에는 (<code>join</code>혹은 <code>return</code>을 변형이라 표현했습니다.)</p>
<p><code>Action1</code> (변형 . 연산) <code>Action2</code></p>
<p>를 넘겨 줄 수도,</p>
<p><code>Action1</code> (변형 . 연산) <code>Action2</code> (변형 . 연산) <code>Action3</code> (변형 . 연산) <code>Action4</code> (변형 . 연산) <code>Action5</code></p>
<p>를 넣어 줄 수도 있게 됩니다.</p>
<p>함수형 프로그래밍의 근간이 되는 중요한 특징 중 하나로 볼 수 있습니다.</p>

<div class="comment">
<script src="https://utteranc.es/client.js" repo="lionhairdino/lionhairdino.github.io" issue-term="url" theme="github-light" crossorigin="anonymous" async>
</script>
</div>
<div style="text-align:right">Github 계정이 없는 분은 메일로 보내주세요. lionhairdino at gmail.com </div>
        </div>
        <nav class="toc toc-right js-toc relative z-1 transition--300 absolute pa4 pt5 is-position-fixed"></nav>
        <div id="footer">
            © 2022 lionhairdino. All rights reserved. Generated by <a href="http://jaspervdj.be/hakyll">Hakyll</a>
        </div>
        <script>
            tocbot.init({
                tocSelector: '.js-toc',
                contentSelector: '.js-toc-content',
                headingSelector: 'h2, h3',
                hasInnerContainers: true,
            });
        </script>
    </body>
</html>
